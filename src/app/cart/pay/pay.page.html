<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <app-modal-back-button></app-modal-back-button>
    </ion-buttons>
    <ion-title>Pago</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card>
    <ion-card-header>
      <ion-card-title color="primary">{{restaurante.nombre}}</ion-card-title>
      <ion-card-subtitle>
        <p>{{restaurante.direccion}}</p>
        <strong>Siga las instrucciones y cargue el soporte de pago.</strong>
      </ion-card-subtitle>
    </ion-card-header>

    <ion-list lines="none">
      <ion-list-header>
        <ion-label>Metodo de pago</ion-label>
      </ion-list-header>
      <ion-item>
        <ion-thumbnail slot="start">
          <img [src]="orden.metodo_pago?.imagen" />
        </ion-thumbnail>
        <ion-label class="ion-text-wrap">
          {{orden.metodo_pago?.nombre}}
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label class="ion-text-wrap">
          Cuenta No. {{
          orden.metodo_pago?.RestauranteMetodoPago?.numero_cuenta}}
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label class="ion-text-wrap">
          Valor: {{ orden.valor | currency: 'COP':'symbol':'1.0' }}
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label class="ion-text-wrap">
          {{ orden.metodo_pago?.RestauranteMetodoPago?.detalle}}
        </ion-label>
      </ion-item>
    </ion-list>

    <ion-card-content>
      <ion-chip
        *ngIf="orden['estado'] && orden.soporte_pago"
        [color]="orden['estado'].color"
      >
        <ion-label>{{orden['estado'].text}}</ion-label>
      </ion-chip>
      <div>
        <img
          *ngIf="paymentSupport"
          [src]="paymentSupportThumbnail"
          [alt]="paymentSupport.nombre"
          (click)="showPaymentSupportFull = true"
        />
      </div>

      <input
        #image
        type="file"
        name="image"
        accept="image/*"
        hidden
        (change)="onLoadImage($event.target['files'])"
      />

      <ion-button fill="outline" (click)="image.click()">
        Cargar Soporte de Pago
        <ion-icon name="document-attach-outline" slot="end"></ion-icon>
      </ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>

<ion-footer class="ion-no-border">
  <ion-toolbar>
    <ion-button expand="full" (click)="onClickAceptar()"> Aceptar </ion-button>
  </ion-toolbar>
</ion-footer>

<ng-image-fullscreen-view
  [images]="[{ image: paymentSupportFull }]"
  [imageIndex]="0"
  [show]="showPaymentSupportFull"
  (close)="showPaymentSupportFull = false"
></ng-image-fullscreen-view>
