<ion-header [translucent]="true">
  <app-toolbar></app-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-item-divider sticky lines="none">
    <ion-label class="ion-text-wrap">
      <h2 class="title">Mi carrito de compras</h2>
    </ion-label>
    <ion-button
      slot="end"
      fill="clear"
      style="margin-right: 1em"
      (click)="onClickDelete()"
    >
      <ion-icon name="trash" slot="icon-only"></ion-icon>
    </ion-button>
  </ion-item-divider>

  <ion-card *ngFor="let restaurante of restaurantes">
    <ion-list>
      <ion-item lines="full">
        <ion-label class="ion-text-wrap">
          <h2 class="title">{{restaurante.nombre}}</h2>
        </ion-label>
        <ion-checkbox
          slot="end"
          [(ngModel)]="restaurante['selected']"
          (ngModelChange)="onSelectAll($event,restaurante)"
        ></ion-checkbox>
      </ion-item>

      <ion-item *ngFor="let orden of restaurante.Ordenes" lines="none">
        <ion-thumbnail slot="start">
          <img [src]="orden.Producto?.Imagenes[0]?.path" />
        </ion-thumbnail>
        <ion-label class="ion-text-wrap">
          <h2>{{orden.Producto?.nombre}}</h2>
          <p>{{orden.cantidad}}{{' unidad'+(orden.cantidad>1?'es':'')}}</p>
          <p>
            {{orden.Producto.precio * orden.cantidad| currency:
            'COP':'symbol':'1.0'}}
          </p>
        </ion-label>
        <ion-checkbox
          slot="end"
          name="selected"
          [(ngModel)]="orden.selected"
          (ngModelChange)="onSelect(orden,restaurante)"
        ></ion-checkbox>
      </ion-item>
      <ion-button expand="block">
        <span>Ordenar</span>
        <span style="margin-left: 1em">
          {{restaurante.valorTotalOrdenes| currency: 'COP':'symbol':'1.0'}}
        </span>
      </ion-button>
    </ion-list>
  </ion-card>
</ion-content>
